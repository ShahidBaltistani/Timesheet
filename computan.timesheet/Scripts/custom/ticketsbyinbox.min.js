$(function(){var n;jQuery(document).on("click",".assignticket",function(){$("#MyModel-Content").html("");$(".teammember").each(function(){$(this).prop("checked",!1)});n=$(this).closest("tr");var r=$(this).data("ticketid"),t=$(this).data("projectid"),i=$(this).data("skillid"),u=$("#currentclient").val();$.ajax({url:"/TicketsByClient/AssignUsersModel/",data:{clientid:u},type:"GET"}).done(function(n){if(n.error)return alert("error"),!1;$("#MyModel-Content").html(n);t!=""&&$("#projectid_assignuser").val(t);i!=""&&$("#skillid_assignuser").val(i);$("#assignticket_ticketid").val(r)});$("#MyModel").modal("toggle")});jQuery(document).on("click",".saveticketassignment",function(){var f=$("#assignticket_ticketid").val(),t=$("#projectid_assignuser").val(),r=$("#skillid_assignuser").val(),i,u;if(t=="")return sweetAlert("Sorry","Please select a project from the list.","error"),!1;if(t==""||r==="")return sweetAlert("Sorry","Peasle select a skill from the list.","error"),!1;if($(".teammember:checked").length==0)return sweetAlert("Sorry","Please select at least one team member to assign the ticket.","error"),!1;i=[];$(".teammember:checked").each(function(){i.push($(this).data("userid"))});u=i.join(",");$.ajax({url:"/Tickets/AssignTicket/",data:{ticketid:f,projectid:t,skillid:r,users:u},type:"POST"}).done(function(t){if(t.error)return alert(t.error),!1;$("#MyModel").modal("toggle");$("#MyModel-Content").html("");$("body").on("hidden.bs.modal","#MyModel",function(){$(this).removeData("bs.modal")});return n.animate({backgroundColor:"yellow"},1e3).fadeOut(1e3,function(){n.remove()}),new PNotify({title:"Success",text:"The task has been assigned to selected users.",type:"success"}),$("#projectid_assignuser").val("").trigger("change"),$("#skillid_assignuser").val("").trigger("change"),$(".teammember:checked").prop("checked",!1),!1})})});