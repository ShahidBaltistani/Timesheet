function updatebuckets(n){$.ajax({url:"/tickettimelogs/UpdateMyBuckets/",data:{StartDate:n},type:"GET"}).done(function(n){return n.error,$(".mybuckets").html(n),!1})}function formatDate(n){var t=leftPad(n.getDate(),2),i=n.getMonth().length+1===1?n.getMonth()+1:"0"+(n.getMonth()+1);return i+"/"+t+"/"+n.getFullYear()}$(function(){$('[data-toggle="tooltip"]').tooltip();autosize(document.querySelectorAll("textarea"));$(document).on("click",".topbucketbtn",function(n){n.preventDefault();$.ajax({url:"/GlobalBuckets/BucketSearchFilter/",type:"Get",success:function(n){$(".BucketSearchFilter").html(n)}});$.ajax({url:"/GlobalBuckets/Index/",type:"Get",success:function(n){$(".GlobalBucketslist").html(n)}});$("#topbucket").addClass("open")});$(".globalbucketform").submit(function(n){return n.preventDefault(),!1});$("button.close").on("click",function(){$("#topbucket").removeClass("open")});$(document).on("click",".deletetimelogGobal",function(){var n=$(this).attr("href"),t=$("div.bucketitemrow").length,i=$(this).closest("div.bucketitemrow");return swal({title:"Delete Bucket?",text:"Are you sure, you want to delete this bucket ?",type:"error",showCancelButton:!0,closeOnConfirm:!1,confirmButtonColor:"#2196F3",showLoaderOnConfirm:!0},function(){$.ajax({url:n,data:"",type:"GET"}).done(function(n){var u,f,e,r;if(n.error)return swal({title:n.error,confirmButtonColor:"#2196F3",type:"error"}),!1;$(i).remove();u=$(".bucktcount").html();$(".bucktcount").html(parseInt(u)-1);t==1&&(f="<center><span><b>Sorry, no task found in your bucket<\/b><\/span><\/center>",$(".GlobalBucketslist").prepend(f),$(".savebtn").remove());swal({title:"Your Bucket item has been deleted successfully!",confirmButtonColor:"#2196F3",type:"success"});e=$("#GlobalStartDate").val();r=$("#StartDate").val();$("#StartDate").length!=0&&r==e&&updatebuckets(r)})}),!1});$(document).on("click",".globaladdtimeinbucketbtn",function(){var n=[],t=[],i=$(this);return $("div.bucketitemrow").each(function(){var u=$(this).find(".id").val(),f=$(this).find(".bucketdescription").val(),i=$(this).find(".timespent").val(),e=$(this).find(".timebill").val(),r;i!=""&&t.push($(this));r={id:u,description:f,timespent:i,billtime:e};n.push(r)}),$.ajax({url:"/tickettimelogs/Addbuckettime/",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),success:function(n){var r,f,u;n.error?swal("Error",n.errortext,"error"):($(t).each(function(){$(this).remove()}),swal("Done","Time added Succesfully.","success"),r=$("div.bucketitemrow"),$(".bucktcount").html(r.length),r.length==0&&(i.remove(),$(".GlobalBucketslist").append("<center><span><b>Sorry, no task found in your bucket<\/b><\/span><\/center>")),f=$("#GlobalStartDate").val(),u=$("#StartDate").val(),$("#StartDate").length!=0&&u==f&&updatebuckets(u))},error:function(){alert("Failed")}}),!1});$(document).on("click",".globalsearchbtn",function(){var n=$("#GlobalStartDate").val();$.ajax({url:"/GlobalBuckets/MyBucketsGlobal/",data:{StartDate:n},type:"GET"}).done(function(n){if(n.error)return!1;$(".GlobalBucketslist").html(n);var t=$("div.bucketitemrow");return t=t.length,$(".bucktcount").html(t),!1})})});