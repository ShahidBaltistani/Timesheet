jQuery(document).ready(function(){function n(n){$.ajax({url:"/project/GetNotes/",data:{id:n},type:"GET"}).done(function(n){if(n.error)return!1;var t='<li class="media"><div class="media-left"><a href="#"><img src="/Content/images/placeholder.jpg" data-id="'+n.id+'" class="img-circle notesimg"title="'+n.FullName+'"><\/a><\/div><div class="media-body"><div class="media-content">'+n.comments+'<\/div><span class="media-annotation display-block mt-10"><b>'+n.FullName+"&nbsp;<\/b>"+n.createdonutc+'&nbsp;<span data-id="'+n.id+'" class="editnotemsg"><b>Edit<\/b><\/span> &nbsp;<span data-id="'+n.id+'" class="deletenotemsg"><b>Delete<\/b><\/span><\/span><\/div><\/li>';return $(".ulmsg").append(t),$("#msg").val(""),!1})}$(document).on("click",".taskstatus",function(){var n=$(this),t=$(this).data("id"),i=$(this).data("statusid");$.ajax({url:"/project/Get_Task_ByStatus/",data:{id:t,statusid:i},type:"GET"}).done(function(t){return t==null?(alert("Failed"),!1):(alert(t),$(".taskstatus").removeClass("active"),n.addClass("active"),$(".contentdiv").empty(),$(".contentdiv").append(t),!1)})});$(document).on("click",".addfiles",function(){$("#uploadfielmodel").modal("show")});$(document).on("click","#btnuploadfile",function(){var n,t,i;if($("#notificationdiv").html(" "),n=new FormData,t=$("#projectfile")[0].files[0],!t){var r=$("#error-notification-template").html(),u=Handlebars.compile(r),f=u({errortext:"Please select a file."});return $("#notificationdiv").prepend(f),!1}n.append("imageFile",t);i=$(".modelprojectid").val();$.ajax({url:"/project/UploadFile/"+i,type:"POST",contentType:!1,processData:!1,data:n}).done(function(n){if(n.error){var t=$("#error-notification-template").html(),i=Handlebars.compile(t),r=i(n);return $("#notificationdiv").prepend(r),!1}var t=$("#success-notification-template").html(),i=Handlebars.compile(t),r=i(n);return $("#notificationdiv").prepend(r),$("#projectfile").val(null),!1})});$(document).on("click","#btnDelete",function(){var n=$(this).data("id"),t=$(this).closest("tr"),i=$(this).closest("tbody").find("tr").length;return swal({title:"Delete File?",text:"Are you sure, you want to delete this file ?",type:"error",showCancelButton:!0,closeOnConfirm:!1,confirmButtonColor:"#2196F3",showLoaderOnConfirm:!0},function(){$.ajax({url:"/project/DeleteFile/"+n,type:"GET"}).done(function(n){if(n.error)return swal({title:n.response,confirmButtonColor:"#2196F3",type:"error"}),!1;if($(t).remove(),i==1)$(".table-body").prepend('<tr><td colspan = "4" style = "text-align: center;" > Sorry, no files found.<\/td><\/tr>');swal({title:n.response,confirmButtonColor:"#2196F3",type:"success"})})}),!1});$(document).on("click",".btnaddcredentials",function(){var n=$(this).data("id");$.ajax({url:"/credentials/create/",data:{},type:"GET"}).done(function(t){var i,r;return t.error?(alert("Failed"),!1):(i="Add Credentials",$(".credentialmodeltitle").text(i),$("#credentialformmodeldiv").html(t),r="<input type='hidden' value='"+n+"' id='projectid' name='projectid'>",$("#form-group-productid").html(""),$("#form-group-productid").hide(),$("#addcredentials").append(r),$("select").select2(),$("#Addcredentialmodel").modal("show"),!1)})});$(document).on("submit","#addcredentials",function(n){n.preventDefault();var t=$(this).serialize();$.post("/credentials/create",t).done(function(){return sweetAlert("","The credentials has been added successfully!","success"),$(".projectcreadentials").click(),$("#Addcredentialmodel").modal("hide"),!1}).fail(function(){})});$(document).on("click",".editcredentialsbtn",function(){$(".credentialmodeltitle").text("");var t=$(this),n=$(this).data("id");$.ajax({url:"/credentials/edit/"+n,data:{},type:"GET"}).done(function(n){if(n.error)return alert("Failed"),!1;$("#credentialformmodeldiv").html(n);var t=$("#projectid").val(),i="<input type='hidden' value='"+t+"' id='projectid' name='projectid'>";return $("#form-group-productid").html(""),$("#form-group-productid").hide(),$("#editcredentials").append(i),$("select").select2(),$("#Addcredentialmodel").modal("show"),!1})});$(document).on("submit","#editcredentials",function(n){n.preventDefault();var t=$(this).serialize();$.post("/credentials/edit",t).done(function(){return sweetAlert("","The credentials has been updated successfully!","success"),$(".projectcreadentials").click(),$("#Addcredentialmodel").modal("hide"),!1}).fail(function(){})});$(function(){$(".contentdiv").on("click",".usernameclick",function(){var n=$("<input>");$("body").append(n);n.val($(this).closest("tr").find(".usernameval").text().trim()).select();document.execCommand("copy");n.remove()})});$(function(){$(".contentdiv").on("click",".pwdclick",function(){var n=$(this).data("id");$.ajax({url:"/credentials/getpassword",data:{id:n},type:"GET"}).done(function(n){var t=$("<input>");return $("body").append(t),t.val(n.password).select(),document.execCommand("copy"),t.remove(),!1})})});$(document).on("click",".tasklist",function(){$(".Addcredentialsli").hide();var n=$(this).data("id");$.ajax({url:"/projectdashboard/get_tasklist/"+n,data:{},type:"GET"}).done(function(n){return n.error?(alert("Failed"),!1):($(".contentdiv").html(n),$(".projectfilesli").removeClass("active"),$(".credentialsli").removeClass("active"),$(".notesli").removeClass("active"),$(".taskli").addClass("active"),$(".taskstatus").removeClass("active"),$(".filterbystatus  .taskstatus").each(function(){$(this).data("statusid")==2&&$(this).addClass("active")}),!1)})});$(document).on("click",".btnsendmsg",function(){var i=$("#msg").val(),t=$(this).data("id");$.ajax({url:"/project/addprojectnotes/",data:{id:t,text:i},type:"GET"}).done(function(i){return i.error?(alert("Failed"),!1):(n(t),!1)})});$(document).on("click",".editnotemsg",function(){var n=$(this).data("id"),t=$(this).closest("div").children(".media-content").text(),i=$(this).closest("div").children(".media-content");return swal({title:"Edit Note!",type:"input",inputValue:t,showCancelButton:!0,closeOnConfirm:!1,confirmButtonColor:"#2196F3",showLoaderOnConfirm:!0},function(t){if(t===!1)return!1;if(t==="")return swal.showInputError("You need to write something!"),!1;$.ajax({url:"/project/EditProjectNotes/",data:{id:n,comment:t},type:"GET"}).done(function(n){if(n.error)return swal({title:n.response,confirmButtonColor:"#2196F3",type:"error"}),!1;$(i).html(t);swal({title:n.response,confirmButtonColor:"#2196F3",type:"success"})})}),!1});$(document).on("click",".deletenotemsg",function(){var n=$(this).data("id"),t=$(this).closest("li"),i=$(this).closest("ul").find("li").length;return swal({title:"Delete Note?",text:"Are you sure, you want to delete this note ?",type:"error",showCancelButton:!0,closeOnConfirm:!1,confirmButtonColor:"#2196F3",showLoaderOnConfirm:!0},function(){$.ajax({url:"/project/DeleteProjectNotes/"+n,data:"",type:"GET"}).done(function(n){if(n.error)return swal({title:n.response,confirmButtonColor:"#2196F3",type:"error"}),!1;if($(t).remove(),i==1)$(".ulmsg").prepend('<li class="media"><span class="media-annotation display-block mt-10"><b>Sorry, no note found!<\/b><\/span><\/li>');swal({title:n.response,confirmButtonColor:"#2196F3",type:"success"})})}),!1});$("#uploadfielmodel").on("hidden.bs.modal",function(){location.reload()})});