jQuery(function(){var n=$(".tbodyconditions").find("tr").length;n==0?$(".andordiv").addClass("hide"):$(".andordiv").removeClass("hide");n=$(".tbodyexceptions").find("tr").length;n==0?$(".andordiv-exception").addClass("hide"):$(".andordiv-exception").removeClass("hide");jQuery(document).on("click","#btnsavecondition",function(){var n={id:0,ruleid:jQuery("#ruleid").val(),isrequired:$("input[name=isrequired]:checked").val(),ruleconditiontypeid:jQuery("#ruleconditiontypeid").val(),ruleconditionvalue:jQuery("#ruleconditionvalue").val()};return jQuery("#ruleconditiontypeid").val()==""?(sweetAlert("Sorry","The condition type value is requied!","error"),!1):jQuery("#ruleconditionvalue").val()==""?(sweetAlert("Sorry","The condition value is requied!","error"),!1):(jQuery.ajax({url:"/ruleconditions/create",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),success:function(n){if(n.success&&n.success){$(".rulesconditions").html(n.ruleconditionlist);$("#ruleconditiontypeid").val("").trigger("change");$("#ruleconditionvalue").val("");$(".tbodyconditions").removeClass("emptytr");var t=$(".tbodyconditions").find("tr").length;t==0?$(".andordiv").addClass("hide"):$(".andordiv").removeClass("hide")}},error:function(){alert("Failed")}}),!1)});jQuery(document).on("click",".eidtrulescondition",function(){tr=$(this).closest("tr");var n=$(this).data("id"),t="/RuleConditions/edit/"+n;return jQuery.ajax({url:t,type:"GET",data:"",success:function(n){jQuery(".rulesconditionsform").html(n);$("#btnsavecondition").addClass("btneditcondition");$("#btnsavecondition").val("Update Condition");$(".btneditcondition").removeAttr("id");$("html,body").animate({scrollTop:$(".rulesconditionsform").offset().top-150},"slow");var t=$(".tbodyconditions").find("tr").length;t==0||t==1?$(".andordiv").addClass("hide"):$(".andordiv").removeClass("hide")},error:function(){alert("Failed")}}),!1});jQuery(document).on("click",".btneditcondition",function(){var n=$(".tbodyconditions").find("tr").length,t;return(n==0||n==1?$(".andordiv").addClass("hide"):$(".andordiv").removeClass("hide"),t={id:$("#id").val(),ruleid:jQuery("#ruleid").val(),isrequired:$("input[name=isrequired]:checked").val(),ruleconditiontypeid:jQuery("#ruleconditiontypeid").val(),ruleconditionvalue:jQuery("#ruleconditionvalue").val()},jQuery("#ruleconditiontypeid").val()=="")?(sweetAlert("Sorry","The condition type is requied!","error"),!1):jQuery("#ruleconditionvalue").val()==""?(sweetAlert("Sorry","The condition value is requied!","error"),!1):(jQuery.ajax({url:"/ruleconditions/edit",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(n){n.success&&n.success&&($(".rulesconditions").html(n.ruleconditionlist),$("#ruleconditiontypeid").val("").trigger("change"),$("#ruleconditionvalue").val(""),$("#id").val(""),$(".btneditcondition").attr("id","btnsavecondition"),$("#btnsavecondition").removeClass("btneditcondition"),$("#btnsavecondition").val("Save new condition"))},error:function(){alert("Failed")}}),!1)});$(document).on("click",".deletetrulescondition",function(){var n=$(this).data("id"),t=$(this).closest("tr"),i=$(this).closest("tbody").find("tr").length;return swal({title:"Delete Rule Condition?",text:"Are you sure, you want to delete this Rule Condition?",type:"error",showCancelButton:!0,closeOnConfirm:!1,confirmButtonColor:"#2196F3",showLoaderOnConfirm:!0},function(){$.ajax({url:"/ruleconditions/Delete/",data:{id:n},type:"Post"}).done(function(n){if(n.error)return swal({title:n.error,confirmButtonColor:"#2196F3",type:"error"}),!1;if($(t).remove(),i==1)$(".tbodyconditions").addClass("emptytr"),$(".tbodyconditions").prepend('<tr style="text-align:center;"><td colspan="3">Sorry, no rule condition added yet.<\/td><\/tr>'),$("#cancelrulecondition").click();swal({title:"The selected rule condition has been deleted successfully!",confirmButtonColor:"#2196F3",type:"success"})})}),!1});$(document).on("change","#ruleactiontypeid",function(){var n=$(this).val();n==1?($("#projectid").hasClass("hidden")&&($("#projectid").removeClass("hidden"),$("#skillid").removeClass("hidden"),$("#projectid").select2(),$("#skillid").select2()),$("#ruleactionvalue").hasClass("hidden")&&($("#ruleactionvalue").removeClass("hidden"),$("#ruleactionvalue").select2()),$("#statusid").hasClass("hidden")||($("#statusid").select2("destroy"),$("#statusid").addClass("hidden"))):n==2?($("#projectid").hasClass("hidden")||($("#projectid").select2("destroy"),$("#skillid").select2("destroy"),$("#projectid").addClass("hidden"),$("#skillid").addClass("hidden")),$("#ruleactionvalue").hasClass("hidden")&&($("#ruleactionvalue").removeClass("hidden"),$("#ruleactionvalue").select2()),$("#statusid").hasClass("hidden")||($("#statusid").select2("destroy"),$("#statusid").addClass("hidden"))):n==3&&($("#projectid").hasClass("hidden")||($("#projectid").select2("destroy"),$("#skillid").select2("destroy"),$("#projectid").addClass("hidden"),$("#skillid").addClass("hidden")),$("#ruleactionvalue").hasClass("hidden")||($("#ruleactionvalue").select2("destroy"),$("#ruleactionvalue").addClass("hidden")),$("#statusid").hasClass("hidden")&&($("#statusid").removeClass("hidden"),$("#statusid").select2()))});jQuery(document).on("click","#btnsaveaction",function(){var n={id:0,ruleid:jQuery("#ruleid").val(),ruleactiontypeid:jQuery("#ruleactiontypeid").val(),ruleactionvalue:jQuery("#ruleactionvalue").val(),projectid:jQuery("#projectid").val(),skillid:jQuery("#skillid").val(),statusid:jQuery("#statusid").val()};return jQuery("#ruleactiontypeid").val()==""?(sweetAlert("Sorry","Rule action type is required!","error"),!1):jQuery("#ruleactionvalue").val()==""&&(ruleactiontypeid==1||ruleactiontypeid==2)?(sweetAlert("Sorry","User is required!","error"),!1):jQuery("#projectid").val()==""&&ruleactiontypeid==1?(sweetAlert("Sorry","Project is required!","error"),!1):jQuery("#skillid").val()==""&&ruleactiontypeid==1?(sweetAlert("Sorry","Skill is required!","error"),!1):(jQuery.ajax({url:"/ruleactions/create",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),success:function(n){n.success&&($(".ruleactionlist").html(n.ruleslist),$("#ruleactionvalue").val("").trigger("change"),$("#projectid").val("").trigger("change"),$("#skillid").val("").trigger("change"))},error:function(){alert("Failed")}}),!1)});jQuery(document).on("click",".eidtrulesactions",function(){var n=$(this).data("id"),t="/RuleActions/edit/"+n;return jQuery.ajax({url:t,type:"GET",data:"",success:function(n){jQuery(".ruleactoinform").html(n);$("#btnsaveaction").addClass("btneditaction");$("#btnsaveaction").val("Update Action");$(".btneditaction").removeAttr("id");$("html,body").animate({scrollTop:$(".ruleactoinform").offset().top-150},"slow");var t=$("#ruleactiontypeid").val();t==1?($("#ruleactionvalue").hasClass("hidden")&&($("#ruleactionvalue").removeClass("hidden"),$("#ruleactionvalue").select2()),$("#projectid").hasClass("hidden")&&($("#projectid").removeClass("hidden"),$("#skillid").removeClass("hidden"),$("#projectid").select2(),$("#skillid").select2())):t==2?($("#ruleactionvalue").hasClass("hidden")&&($("#ruleactionvalue").removeClass("hidden"),$("#ruleactionvalue").select2()),$("#projectid").hasClass("hidden")||($("#projectid").select2("destroy"),$("#skillid").select2("destroy"),$("#projectid").addClass("hidden"),$("#skillid").addClass("hidden")),$("#statusid").hasClass("hidden")||($("#statusid").select2("destory"),$("#statusid").addClass("hidden"))):t==3&&($("#ruleactionvalue").hasClass("hidden")||($("#ruleactionvalue").select2("destroy"),$("#ruleactionvalue").addClass("hidden")),$("#projectid").hasClass("hidden")||($("#projectid").select2("destroy"),$("#skillid").select2("destroy"),$("#projectid").addClass("hidden"),$("#skillid").addClass("hidden")),$("#statusid").hasClass("hidden")&&($("#statusid").removeClass("hidden"),$("#statusid").select2()))},error:function(){alert("Failed")}}),!1});jQuery(document).on("click",".btneditaction",function(){var n={id:$(".ruleactionid").data("id"),ruleid:$(".ruleid").data("id"),ruleactiontypeid:jQuery("#ruleactiontypeid").val(),ruleactionvalue:jQuery("#ruleactionvalue").val(),projectid:jQuery("#projectid").val(),skillid:jQuery("#skillid").val(),statusid:jQuery("#statusid").val()};return jQuery("#ruleactiontypeid").val()==""?(sweetAlert("Sorry","Rule action type is required!","error"),!1):jQuery("#ruleactionvalue").val()==""&&(ruleactiontypeid==1||ruleactiontypeid==2)?(sweetAlert("Sorry","User is required!","error"),!1):jQuery("#projectid").val()==""&&ruleactiontypeid==1?(sweetAlert("Sorry","Project is required!","error"),!1):jQuery("#skillid").val()==""&&ruleactiontypeid==1?(sweetAlert("Sorry","Skill is required!","error"),!1):(jQuery.ajax({url:"/ruleactions/edit",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),success:function(n){n.success&&n.success&&($(".ruleactionlist").html(n.ruleactionlist),$("#ruleactiontypeid").val("").trigger("change"),$("#projectid").val("").trigger("change"),$("#skillid").val("").trigger("change"),$("#ruleactionvalue").val(""),$(".btneditaction").attr("id","btnsaveaction"),$("#btnsaveaction").removeClass("btneditaction"),$("#btnsaveaction").val("Create"))},error:function(){alert("Failed")}}),!1)});$(document).on("click",".deletetruleaction",function(){var n=$(this).data("id"),t=$(this).closest("tr"),i=$(this).closest("tbody").find("tr").length;return swal({title:"Delete Log?",text:"Are you sure, you want to delete this Rule Action?",type:"error",showCancelButton:!0,closeOnConfirm:!1,confirmButtonColor:"#2196F3",showLoaderOnConfirm:!0},function(){$.ajax({url:"/ruleactions/Delete/",data:{id:n},type:"Post"}).done(function(n){var r,u;if(n.error)return swal({title:n.error,confirmButtonColor:"#2196F3",type:"error"}),!1;$(t).remove();i==1&&(r='<tr style="text-align:center;"><td colspan="3">Sorry, no rule action added yet.<\/td><\/tr>',$("#licensetable tbody").prepend(r));swal({title:"The selected rule action has been deleted successfully!",confirmButtonColor:"#2196F3",type:"success"});u=$(".btneditaction").length;u!=0&&($("#ruleactiontypeid").val("").trigger("change"),$("#ruleactionvalue").val("").trigger("change"),$("#projectid").val("").trigger("change"),$("#skillid").val("").trigger("change"),$(".btneditaction").attr("id","btnsaveaction"),$("#btnsaveaction").removeClass("btneditaction"),$("#btnsaveaction").val("Create"))})}),!1});jQuery(document).on("click","#btnsaveexception",function(){var n={id:0,ruleid:jQuery("#ruleid").val(),ruleexceptiontypeid:jQuery("#ruleexceptiontypeid").val(),ruleexceptionvalue:jQuery("#ruleexceptionvalue").val(),isrequired:$(".isrequired-exception:checked").val()};return jQuery("#ruleexceptiontypeid").val()==""?(sweetAlert("Sorry","Exception type value is required!","error"),!1):jQuery("#ruleexceptionvalue").val()==""?(sweetAlert("Sorry","Exception value is required!","error"),!1):(jQuery.ajax({url:"/ruleexceptions/create",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),success:function(n){if(n.success){$(".rulexceptionlist").html(n.exceptionlist);$("#ruleexceptiontypeid").val("").trigger("change");$("#ruleexceptionvalue").val("");$(".tbodyexceptions").removeClass("emptytr");var t=$(".tbodyexceptions").find("tr").length;t==0?$(".andordiv-exception").addClass("hide"):$(".andordiv-exception").removeClass("hide")}},error:function(){alert("Failed")}}),!1)});jQuery(document).on("click",".eidtrulesexception",function(){var n=$(this).data("id"),t="/RuleExceptions/edit/"+n;return jQuery.ajax({url:t,type:"GET",data:"",success:function(n){jQuery(".rulexceptionform").html(n);$("#btnsaveexception").addClass("btneditexception");$("#btnsaveexception").val("Update Exception");$(".btneditexception").removeAttr("id");$("html,body").animate({scrollTop:$(".rulexceptionform").offset().top-150},"slow");var t=$(".tbodyexceptions").find("tr").length;t==0||t==1?$(".andordiv-exception").addClass("hide"):$(".andordiv-exception").removeClass("hide")},error:function(){alert("Failed")}}),!1});jQuery(document).on("click",".btneditexception",function(){var n=$(".tbodyexceptions").find("tr").length,t;return(n==0||n==1?$(".andordiv-exception").addClass("hide"):$(".andordiv-exception").removeClass("hide"),t={id:$(".ruleExceptionid").val(),ruleid:$("#ruleid").val(),ruleexceptiontypeid:jQuery("#ruleexceptiontypeid").val(),ruleexceptionvalue:jQuery("#ruleexceptionvalue").val(),isrequired:$(".isrequired-exception:checked").val()},jQuery("#ruleexceptiontypeid").val()=="")?(sweetAlert("Sorry","Exception type value is required!","error"),!1):jQuery("#ruleexceptionvalue").val()==""?(sweetAlert("Sorry","Exception value is required!","error"),!1):(jQuery.ajax({url:"/ruleexceptions/edit",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(n){n.success&&n.success&&($(".rulexceptionlist").html(n.exceptionlist),$("#ruleexceptiontypeid").val("").trigger("change"),$("#ruleexceptionvalue").val(""),$(".btneditexception").attr("id","btnsaveexception"),$("#btnsaveexception").removeClass("btneditexception"),$("#btnsaveexception").val("Create"))},error:function(){alert("Failed")}}),!1)});$(document).on("click",".deletetrulesexception",function(){var n=$(this).data("id"),t=$(this).closest("tr"),i=$(this).closest("tbody").find("tr").length;return swal({title:"Delete Log?",text:"Are you sure, you want to delete this Rule Exception?",type:"error",showCancelButton:!0,closeOnConfirm:!1,confirmButtonColor:"#2196F3",showLoaderOnConfirm:!0},function(){$.ajax({url:"/ruleexceptions/Delete/",data:{id:n},type:"Post"}).done(function(n){if(n.error)return swal({title:n.error,confirmButtonColor:"#2196F3",type:"error"}),!1;if($(t).remove(),i==1)$("#licensetable tbody").prepend('<tr style="text-align:center;"><td colspan="3">Sorry, no rule exception added yet.<\/td><\/tr>'),$(".tbodyexceptions").addClass("emptytr");swal({title:"The selected rule exception has been deleted successfully!",confirmButtonColor:"#2196F3",type:"success"})})}),!1});$(document).on("click","#cancelrulecondition",function(){$("#id").val("");$("#ruleconditiontypeid").val("").trigger("change");$("#ruleconditionvalue").val("");$(".btneditcondition").attr("id","btnsavecondition");$("#btnsavecondition").removeClass("btneditcondition");$("#btnsavecondition").val("Save new condition");var n=$(".tbodyconditions").find("tr").length;return n==0||$(".tbodyconditions").hasClass("emptytr")?$(".andordiv").addClass("hide"):$(".andordiv").removeClass("hide"),!1});$(document).on("click","#cancelruleaction",function(){return $("#ruleactiontypeid").val("").trigger("change"),$("#ruleactionvalue").val("").trigger("change"),$("#projectid").val("").trigger("change"),$("#skillid").val("").trigger("change"),$(".btneditaction").attr("id","btnsaveaction"),$("#btnsaveaction").removeClass("btneditaction"),$("#btnsaveaction").val("Create"),!1});$(document).on("click","#cancelruleexception",function(){$("#ruleexceptiontypeid").val("").trigger("change");$("#ruleexceptionvalue").val("");$(".btneditexception").attr("id","btnsaveexception");$("#btnsaveexception").removeClass("btneditexception");$("#btnsaveexception").val("Create");var n=$(".tbodyexceptions").find("tr").length;return n==0||$(".tbodyexceptions").hasClass("emptytr")?$(".andordiv-exception").addClass("hide"):$(".andordiv-exception").removeClass("hide"),!1})});