(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)})(function(n){var t=n.ajax.bind(n);n.ajax=function(i,r){typeof i=="object"&&(r=i,i=undefined);r=r||{chunking:!1};var u=r.xhr?r.xhr():n.ajaxSettings.xhr(),f=r.chunking||n.ajaxSettings.chunking;return r.xhr=function(){if(typeof r.uploadProgress=="function"){if(!u.upload)return;u.upload.onprogress=null;u.upload.addEventListener("progress",function(n){r.uploadProgress.call(this,n)},!1)}if(typeof r.progress=="function"){var n=0;u.addEventListener("progress",function(t){var i=[t],u="";this.readyState===XMLHttpRequest.LOADING&&f&&(u=this.responseText.substr(n),n=this.responseText.length,i.push(u));r.progress.apply(this,i)},!1)}return u},t(i,r)}});